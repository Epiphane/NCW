////////////////////////////////////////////////////////////////////////////////////////////////////
// NoesisGUI - http://www.noesisengine.com
// Copyright (c) 2013 Noesis Technologies S.L. All Rights Reserved.
////////////////////////////////////////////////////////////////////////////////////////////////////


#include <NsApp/TriggerAction.h>
#include <NsGui/DependencyData.h>
#include <NsGui/PropertyMetadata.h>
#include <NsCore/ReflectionImplement.h>


using namespace NoesisApp;

////////////////////////////////////////////////////////////////////////////////////////////////////
NoesisApp::TriggerAction::TriggerAction(const Noesis::TypeClass* associatedType):
    AttachableObject(associatedType)
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////
NoesisApp::TriggerAction::~TriggerAction()
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////
bool NoesisApp::TriggerAction::GetIsEnabled() const
{
    return GetValue<bool>(IsEnabledProperty);
}

////////////////////////////////////////////////////////////////////////////////////////////////////
void NoesisApp::TriggerAction::SetIsEnabled(bool isEnabled)
{
    SetValue<bool>(IsEnabledProperty, isEnabled);
}

////////////////////////////////////////////////////////////////////////////////////////////////////
void NoesisApp::TriggerAction::CallInvoke(BaseComponent* parameter)
{
    if (GetIsEnabled())
    {
        Invoke(parameter);
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////
Noesis::Ptr<NoesisApp::TriggerAction> NoesisApp::TriggerAction::Clone() const
{
    return Noesis::StaticPtrCast<TriggerAction>(Freezable::Clone());
}

////////////////////////////////////////////////////////////////////////////////////////////////////
Noesis::Ptr<NoesisApp::TriggerAction> NoesisApp::TriggerAction::CloneCurrentValue() const
{
    return Noesis::StaticPtrCast<TriggerAction>(Freezable::CloneCurrentValue());
}

////////////////////////////////////////////////////////////////////////////////////////////////////
NS_BEGIN_COLD_REGION

NS_IMPLEMENT_REFLECTION(NoesisApp::TriggerAction, "NoesisApp.TriggerAction")
{
    Noesis::DependencyData* data = NsMeta<Noesis::DependencyData>(Noesis::TypeOf<SelfClass>());
    data->RegisterProperty<bool>(IsEnabledProperty, "IsEnabled", Noesis::PropertyMetadata::Create(true));
}

////////////////////////////////////////////////////////////////////////////////////////////////////
const Noesis::DependencyProperty* NoesisApp::TriggerAction::IsEnabledProperty;
